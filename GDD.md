# BLITZ RTS — Game Design Document

> **Version**: 0.3 (Prototype)
> **Last Updated**: 2026-02-18
> **Status**: Pre-production — Implementation Ready

### Changelog
| Version | Date | Changes |
|---------|------|---------|
| 0.1 | 2026-02-18 | Initial draft |
| 0.2 | 2026-02-18 | Fixed 6 critical issues: dead parts (MP01/BP05/AP01/ACP05), damage formula (subtractive→multiplicative), army composition (3-build roster), skill system (6 skills pick 3, SP regen), missing systems (watt tiers, base HP, unit cap, battlefield, targeting, air/ground), unified name to BLITZ RTS |
| 0.3 | 2026-02-18 | Review fixes: 속도 단위 정의(0.5타일/초), 기지 방어력(15), Vulcan DPS 테이블 재계산, Missile 와트 T3→T4, 상성표 승산 공식 반영, 스킬 상호작용 6규칙, 로스터 규칙(3필수/중복허용), 엣지케이스(동시파괴/유닛상한), 스플래시vs공중, SP 설계의도 명확화, Miser Core 티어 주의사항, Appendix C 누락행 추가 |

---

## 1. Core Concept

### One-Line Pitch
**"650만 가지 로봇을 조립하고, 전장에 내보내 싸우는 전술 오토배틀 게임"**

### Elevator Pitch
플레이어는 다리, 몸통, 무기, 악세사리를 조합해 자신만의 로봇 소대를 구성한다.
전투는 자동으로 진행되지만, 스킬 사용 타이밍은 플레이어가 직접 결정한다.
조립의 깊이가 곧 실력이며, 매 판 3~5분 안에 승부가 결정된다.

### Genre
전술 오토배틀 + 로봇 커스터마이징 + RPG 성장

### Platform
- 1차: 웹 브라우저 (TypeScript + Canvas/WebGL)
- 2차: Steam (Electron wrap)
- 3차: 모바일 (추후)

### Target Audience
- 메카/로봇을 좋아하는 전략 게임 팬
- Backpack Battles, Mechabellum, Into the Breach 유저
- 노바 1492 향수를 가진 플레이어
- 연령: 15~35세

### Inspiration
| 게임 | 가져올 요소 |
|------|-------------|
| Nova 1492 | 파츠 조합, 와트 경제, 스킬 SP 시스템, 역할 분담 |
| Backpack Battles | 조립이 곧 게임, 비동기 PvP |
| Mechabellum | 메카 유닛 배치, 라운드 기반 |
| Into the Breach | 짧은 세션, 완벽한 정보, 전술적 깊이 |
| Super Auto Pets | 접근성, 한 판 더 유도 |

---

## 2. Core Game Loop

```
┌──────────────────────────────────────────────────┐
│                                                  │
│   [조립실]                                        │
│   ├─ 파츠 선택 (다리/몸통/무기/악세)                │
│   ├─ 빌드 3개 구성 (로스터)                        │
│   ├─ 스킬 3개 선택 (6개 중 택 3)                   │
│   └─ 시간 제한 없음                               │
│          │                                       │
│          ▼                                       │
│   [전투] (3~5분)                                  │
│   ├─ 유닛 이동/공격: 자동 (AI)                     │
│   ├─ 스킬 사용: 수동 (플레이어 판단)                │
│   ├─ 승리 조건: 상대 기지 파괴 or 유닛 전멸         │
│   └─ 패배 조건: 내 기지 파괴 or 유닛 전멸           │
│          │                                       │
│          ▼                                       │
│   [결과/보상]                                     │
│   ├─ 빌드별 상세 전투 통계                         │
│   ├─ 경험치 + 골드 획득                            │
│   ├─ 새 파츠 드롭 (확률)                           │
│   └─ 랭크 포인트 변동 (PvP)                        │
│          │                                       │
│          ▼                                       │
│   [성장]                                          │
│   ├─ 레벨업 → 새 파츠/스킬 해금                    │
│   ├─ 골드 → 파츠 구매/강화                         │
│   └─ 랭크 상승 → 보상, 시즌 목표                   │
│          │                                       │
│          └──→ [조립실] (다시)                      │
│                                                  │
└──────────────────────────────────────────────────┘
```

### Loop Timing
| 단계 | 시간 | 비고 |
|------|------|------|
| 조립 | 무제한 | 시간 압박 없음. 여유롭게 고민 |
| 전투 | 3~5분 | 고정 시간. 타이머 or 전멸 시 종료 |
| 결과 | 10~15초 | 빌드별 상세 통계 확인 |
| 전체 1사이클 | ~5~7분 | "한 판 더" 유도 |

---

## 3. Assembly System (조립 시스템)

> Nova 1492의 핵심이자 이 게임의 정체성.
> "어떤 로봇을 만드느냐"가 곧 실력.

### 3.1 Part Categories

모든 유닛은 4개 파츠 슬롯으로 구성:

```
┌─────────────────────────────┐
│         [무기 AP]            │
│     ┌──────────────┐        │
│     │   [몸통 BP]   │        │
│     └──────────────┘        │
│     ┌──────────────┐        │
│     │   [다리 MP]   │        │
│     └──────────────┘        │
│     + [악세사리 ACP] (선택)   │
└─────────────────────────────┘
```

#### MP (Mobile Parts - 다리)
이동 속도, 하중 제한, 이동 타입 결정.

**속도 단위**: 1 speed = 0.5 타일/초. 전장 30타일 횡단 시간 포함.

| ID | 이름 | 타입 | 속도 | 횡단 시간 | 하중 | 특성 |
|----|------|------|------|----------|------|------|
| MP01 | Scout | 역발형 | 8 | 7.5초 | 160 | 빠르지만 중장비 불가. 정찰/견제용 |
| MP02 | Walker | 인간형 | 5 | 12초 | 200 | 밸런스형 |
| MP03 | Hover | 비행형 | 6 | 10초 | 150 | 공중 유닛. 지상 공격 30% 회피 |
| MP04 | Tank | 탱크형 | 3 | 20초 | 350 | 느리지만 무거운 무기 가능 |
| MP05 | Spider | 4족형 | 4 | 15초 | 300 | 높은 하중 + 준수한 속도 |

> **v0.1→v0.2 변경**: MP01 하중 100→160. 하중 100이면 BP01(50)+AP 최소 무게(80)=130으로 어떤 무장도 불가능한 죽은 파츠였음. 160이면 BP01(50)+Vulcan(80)+ACP01(20)=150 조합이 가능하여 고속 경량 정찰 빌드가 성립.

#### BP (Body Parts - 몸통)
HP, 방어력, 시야, 몸통 타입 결정.

| ID | 이름 | 타입 | HP | 방어 | 시야 | 무게 | 특성 |
|----|------|------|-----|------|------|------|------|
| BP01 | Light Frame | 팔형 | 300 | 5 | 8 | 50 | 넓은 시야 |
| BP02 | Standard | 팔형 | 500 | 10 | 6 | 100 | 밸런스 |
| BP03 | Fortress | 어깨형 | 800 | 20 | 5 | 200 | 높은 방어 |
| BP04 | Sniper Bay | 탑형 | 400 | 8 | 10 | 150 | 최장 시야 |
| BP05 | Juggernaut | 어깨형 | 1200 | 25 | 4 | 200 | 최고 HP |

> **v0.1→v0.2 변경**: BP05 무게 300→200. 무게 300이면 MP04 Tank(하중 350)만 장착 가능하고 무기(130~150)+악세사리 무게를 더하면 하중 초과. 200이면 BP05(200)+Cannon(150)=350 → Tank로 운용 가능, Spider(300)로도 BP05(200)+Hammer(100)=300 가능.

#### AP (Arms Parts - 무기)
공격력, 사거리, 연사속도, 공격 타입 결정.

| ID | 이름 | 타입 | 공격 | 사거리 | 연사 | 무게 | 특성 |
|----|------|------|------|--------|------|------|------|
| AP01 | Vulcan | 팔형 | 15 | 4 | 10 | 80 | 높은 연사. 적 방어를 0.7배로 계산 (장갑 관통) |
| AP02 | Cannon | 어깨형 | 40 | 6 | 3 | 150 | 높은 단발 데미지 |
| AP03 | Sniper | 탑형 | 60 | 10 | 1 | 120 | 최장 사거리. 가장 먼 적 우선 타격 |
| AP04 | Missile | 어깨형 | 25 | 7 | 4 | 130 | 스플래시 데미지 (범위 2). 밀집한 적 우선 타격 |
| AP05 | Hammer | 팔형 | 10 | 3 | 5 | 100 | 방어 완전 무시 + 적 최대HP의 2% 추가. HP 가장 높은 적 우선 타격 |

> **v0.1→v0.2 변경**: AP01 "적 방어×1.5" → "적 방어×0.7" (장갑 관통). v0.1에서는 방어를 1.5배로 계산하면 방어 10인 상대에 실효 방어 15 → 공격 15로 데미지 0. 사실상 모든 상대에게 데미지를 못 주는 죽은 무기였음. 0.7배로 바꾸면 Vulcan은 "장갑을 씹는 연사 무기"로 역할이 명확해짐.

#### ACP (Accessory Parts - 악세사리)
보조 스탯 부여. 선택적 장착.

| ID | 이름 | 무게 | 효과 | 특성 |
|----|------|------|------|------|
| ACP01 | Power Chip | 20 | 공격 +10 | 순수 공격력 증가 |
| ACP02 | Shield Gen | 30 | 방어 +10 | 순수 방어력 증가 |
| ACP03 | Miser Core | 15 | 와트 비용 -30% | 경제적 운용 |
| ACP04 | HP Module | 25 | HP +200 | 생존력 증가 |
| ACP05 | Overdrive | 30 | 사거리 +2, 연사 +1 | 화력 투사 범위 확대 |

> **v0.1→v0.2 변경**: ACP05 "All-in-One(공+5,방+5,HP+100)" → "Overdrive(사거리+2, 연사+1)". All-in-One은 공+5/방+5/HP+100이 Power Chip(공+10), Shield Gen(방+10), HP Module(HP+200) 각각의 절반 수준으로, 어떤 빌드에서도 전문 악세사리보다 열등한 죽은 파츠. Overdrive는 "더 멀리, 더 빨리 쏜다"는 고유 역할을 가짐. 특히 Sniper+Overdrive(사거리12, 연사2)나 Cannon+Overdrive(사거리8, 연사4) 같은 시너지 빌드가 가능.

### 3.2 Assembly Rules (조립 규칙)

#### Rule 1: Weight Limit (하중 제한)
```
몸통 무게 + 무기 무게 + 악세사리 무게 ≤ 다리 하중
```
→ 무거운 무기를 쓰려면 강한 다리가 필요 → 대신 느려짐 → 트레이드오프

#### Rule 2: Type Matching (타입 매칭)
```
무기 타입과 몸통 타입이 일치해야 장착 가능
- 팔형 무기 → 팔형 몸통만
- 어깨형 무기 → 어깨형 몸통만
- 탑형 무기 → 탑형 몸통만 (사실상 저격 전용)
```
→ 무기-몸통 조합이 강제됨 → 빌드 방향이 자연스럽게 갈림

#### Rule 3: Watt Cost (와트 비용)
유닛의 총 무게에 따라 와트 티어 결정:

| 총 무게 | 와트 티어 | 와트 비용 | 컨셉 |
|---------|----------|----------|------|
| ≤130 | Tier 1 (경량) | 60 | 정찰/견제 물량 |
| 131~200 | Tier 2 (표준) | 100 | 범용 주력 |
| 201~280 | Tier 3 (중량) | 160 | 화력/내구 특화 |
| 281+ | Tier 4 (초중량) | 220 | 최상위 결전 병기 |

> Miser Core(ACP03) 적용 시 와트 비용 30% 감소 (소수점 내림)
> **주의**: Miser Core(무게 15)가 티어 경계를 넘기면 역효과. 예) 무게 130(T1:60W) + Miser → 145(T2:100×0.7=70W). 더 비싸짐!
> Miser Core는 **T2 중간(131~185), T3, T4** 빌드에서 효과적. T1과 T2 상단(186~200)에서는 비추천.

전투 시 와트가 자동 충전되며, 충전된 와트로 유닛 생산.
→ 비싼 유닛 1기 vs 싼 유닛 3기 = 전략적 선택

### 3.3 Army Composition (로스터 시스템)

> v0.2 신규: 단일 빌드가 아닌 3빌드 로스터

플레이어는 전투 전에 **3개의 빌드**를 구성한다:

```
로스터 구성:
├─ Build A: 주력 유닛 (예: 화력형)
├─ Build B: 보조 유닛 (예: 견제형)
└─ Build C: 상황 대응 (예: 대탱크형)
```

**생산 우선순위**: 플레이어가 A > B > C 순서를 지정. 와트 충분 시 순서대로 자동 생산.
**생산 비율 조절**: 전투 중 슬라이더로 비율 변경 가능 (예: A만 생산, A:B = 1:1 등)
**유닛 상한**: 한 쪽 최대 **15기** (동시 필드 존재)
**로스터 규칙**:
- 3슬롯 모두 채워야 출격 가능 (빈 슬롯 불가)
- **동일 빌드 중복 허용** — 3×같은 빌드는 유효하지만 다양성이 없어 카운터에 취약
- 로스터 다양성 자체가 전략 (중장갑 3개면 Hammer에 전멸)

### 3.4 Assembly Strategy Examples

**Glass Cannon (유리 대포)**
```
Spider(MP05) + Sniper Bay(BP04) + Sniper(AP03) + Overdrive(ACP05)
무게: 150+120+30 = 300 (하중 300 ✅)
와트: Tier 4 = 220
사거리: 10+2 = 12, 연사: 1+1 = 2
결과: 느리지만 맵 절반을 커버하는 광역 저격수. 비싸지만 2연사.
```

**Speed Scout (고속 정찰)**
```
Scout(MP01) + Light Frame(BP01) + Vulcan(AP01) + Power Chip(ACP01)
무게: 50+80+20 = 150 (하중 160 ✅)
와트: Tier 2 = 100
결과: 속도 8로 빠르게 전선 도달. Vulcan 장갑관통으로 방어 유닛도 상대.
```

**Heavy Tank (중장갑 전차)**
```
Tank(MP04) + Juggernaut(BP05) + Cannon(AP02) + Shield Gen(ACP02)
무게: 200+150+30 = 380 (하중 350 ❌ — 초과!)
→ Shield Gen 대신 Power Chip(20): 200+150+20 = 370 (여전히 ❌)
→ 악세 없이: 200+150 = 350 (하중 350 ✅)
Tank(MP04) + Juggernaut(BP05) + Cannon(AP02)
와트: Tier 4 = 220
결과: HP 1200 + 방어 25의 초중장. 악세 포기 = 트레이드오프.
```

**Economy Rush (경제형 물량)**
```
Walker(MP02) + Standard(BP02) + Vulcan(AP01) + Miser Core(ACP03)
무게: 100+80+15 = 195 (하중 200 ✅)
와트: Tier 2 = 100 × 0.7 = 70
결과: 70 와트로 빠르게 물량 생산. 숫자로 밀어붙이기.
```

**Tank Buster (대탱크 특화)**
```
Walker(MP02) + Light Frame(BP01) + Hammer(AP05) + HP Module(ACP04)
무게: 50+100+25 = 175 (하중 200 ✅)
와트: Tier 2 = 100
결과: 방어 무시 + HP% 추가 데미지로 중장갑 킬러. HP 낮으니 호위 필요.
```

**3빌드 로스터 예시:**
```
Build A: Economy Rush (물량 전선 유지)
Build B: Tank Buster (적 탱크 대응)
Build C: Glass Cannon (후방 저격)
비율: A:B:C = 3:1:1 → A를 주력으로 깔고 B/C로 보조
```

---

## 4. Combat System (전투 시스템)

> 유닛은 AI가 자동 조종. 플레이어는 스킬 사용만 직접 판단.
> "내 빌드가 맞았는가?"를 확인하는 3~5분.

### 4.1 Battlefield (전장)

```
[내 기지]  ←── 30 타일 ──→  [적 기지]
  HP:2000                    HP:2000

타일 구성 (단일 레인):
[B][1][2][3]...[28][29][30][B]

유닛은 타일 위에서 이동/교전.
기지(B)는 양 끝에 위치.
```

- **전장 크기**: 단일 레인, 30 타일
- **기지 HP**: 2000 (양쪽 동일)
- **기지 방어**: 15 (중간 수준. Vulcan 장갑관통으로 실효 10.5, Hammer 무시)
- **기지 공격**: 없음 (수동적. 유닛이 방어해야 함)
- **유닛 상한**: 한 쪽 최대 15기
- **유닛 생산**: 와트 충분 시 즉시 생산. 기지 타일에서 스폰 (1번 또는 30번)
- **타일 중첩**: 한 타일에 여러 유닛 가능 (1D 레인이므로 깊이 방향으로 중첩)
- **지형**: 프로토타입은 평지만. 추후 장애물/고지대 추가 가능

### 4.2 Battle Flow

```
[전투 시작]
    │
    ├─ 와트 충전 시작 (초당 20 와트)
    ├─ 유닛 자동 생산 (로스터 우선순위 + 비율에 따라)
    ├─ 유닛 자동 이동 (적 기지 방향)
    ├─ 적 발견 시 자동 교전 (무기별 타겟팅)
    ├─ 플레이어: 스킬 사용 (SP 소모, SP 자동 재생)
    │
    ├─ 반복... (3~5분)
    │
    └─ 종료 조건:
       ├─ 적 기지 HP 0 → 승리
       ├─ 내 기지 HP 0 → 패배
       └─ 시간 초과 (5분) → 남은 기지 HP % 비교
```

### 4.3 Damage Formula (데미지 공식)

> **v0.2 변경: 감산(subtractive) → 승산(multiplicative)**

**초당 데미지 (DPS):**
```
dps = attack × (attack / (attack + effective_defense)) × fire_rate
```

**effective_defense 계산:**
- 기본: `effective_defense = defense`
- Vulcan(AP01): `effective_defense = defense × 0.7` (장갑 관통)
- Hammer(AP05): `effective_defense = 0` (방어 완전 무시)

**Hammer 특수 데미지:**
```
hammer_dps = (base_attack + target_max_hp × 0.02) × fire_rate
```
→ 방어 무시 + HP 비례 = 대탱크 전문

**Missile 스플래시:**
```
missile_dps = attack × (attack / (attack + defense)) × fire_rate
→ 범위 2타일 내 모든 적에게 적용
```

**왜 승산 공식인가:**
- 감산(`max(0, atk-def)`)은 방어≥공격 시 데미지 0 → 3/5 무기가 특정 상대에 완전 무력화
- 승산은 방어가 높아도 항상 데미지가 들어감 (감소할 뿐)
- 방어 20 vs 공격 15: 감산=0, 승산=15×(15/35)=6.4 → 낮지만 데미지 존재
- 방어의 가치: 수확체감 (방어 10→20보다 0→10이 더 큰 효과) → 스탯 쌓기에 자연스러운 한계

**DPS 예시표 (초당 데미지):**
| 무기 | 공격 | 연사 | vs 방어5 | vs 방어10 | vs 방어20 | vs 방어25 |
|------|------|------|----------|-----------|-----------|-----------|
| Vulcan | 15 | 10 | 121.6 | 102.3 | 77.6 | 69.2 |
| Cannon | 40 | 3 | 106.7 | 96.0 | 80.0 | 73.8 |
| Sniper | 60 | 1 | 55.4 | 51.4 | 45.0 | 42.4 |
| Missile | 25 | 4 | 83.3 | 71.4 | 55.6 | 50.0 |
| Hammer* | 10 | 5 | 50+ | 50+ | 50+ | 50+ |

> *Hammer는 방어 무시이므로 방어값 무관. 기본 DPS=50 + 타겟 최대HP×2%×5
> Vulcan은 방어×0.7 적용 후 계산. 예) vs 방어10: eff_def=7, DPS=15×(15/22)×10=102.3

### 4.4 Targeting Rules (타겟팅)

> v0.2 신규: 무기별 타겟팅 우선순위

| 무기 | 타겟 우선순위 | 근거 |
|------|-------------|------|
| Vulcan | 가장 가까운 적 | 근~중거리 연사 — 눈앞의 적부터 |
| Cannon | 가장 가까운 적 | 표준 교전 |
| Sniper | 가장 먼 적 | 장사정 — 후방 고가치 유닛 노림 |
| Missile | 가장 밀집한 적 그룹 | 스플래시 극대화 |
| Hammer | HP 가장 높은 적 | 대탱크 — %데미지 효율 극대화 |

### 4.5 Air/Ground Interaction (공중/지상)

| 공격자 \ 타겟 | 지상 유닛 | 공중 유닛 (Hover) |
|-------------|----------|-----------------|
| 지상 유닛 | 100% 명중 | 70% 명중 (30% 회피) |
| 공중 유닛 | 100% 명중 | 100% 명중 |

- Hover(MP03) 유닛은 지상 공격에 대해 **30% 회피**
- 공중 유닛끼리는 회피 없음
- **스플래시 vs 공중**: Missile 스플래시도 Hover 회피 적용. 회피 판정은 타겟별 개별 적용 (범위 내 3기 중 1기만 회피할 수 있음)
- 장애물 무시 이동 (프로토타입에서는 장애물 없으므로 속도 이점만)
- **공격 행동**: 유닛은 사거리 내 적 발견 시 정지 후 공격. 적이 사거리 밖으로 나가면 추적 이동 재개

### 4.5b Combat Edge Cases (전투 엣지 케이스)

**동시 기지 파괴:**
- 양쪽 기지 동일 틱에 HP 0 → 남은 유닛 수 많은 쪽 승리
- 유닛 수 동수 → 무승부 (양쪽 모두 소량 보상)

**유닛 상한 도달 시:**
- 필드 15기 → 생산 정지 → 유닛 사망 시 즉시 생산 재개

### 4.6 Watt Economy (와트 경제)

```
초기 와트: 100
와트 충전: 초당 20
최대 와트: 500

유닛 생산: 와트 충분 시 로스터 우선순위에 따라 자동 생산
유닛 상한: 필드 15기 도달 시 생산 정지
```

**전략적 긴장:**
- 60 와트 유닛 × 15기 = 물량전 (빠르게 상한 도달)
- 220 와트 유닛 × 2~3기 = 소수 정예 (생산 느림, 개체 강력)
- 3빌드 혼합 = 60 와트 정찰 + 100 와트 주력 + 220 와트 결전 병기

### 4.7 Skill System (스킬 시스템)

> 자동 전투 속에서 "내가 개입하는 순간"
> v0.2: 6개 중 3개 선택, SP 자동 재생

**SP (Skill Points):**
- 매 전투 시작 시 30 SP
- **초당 5 SP 자동 재생** (v0.1은 비재생이었음)
- 최대 100 SP
- 전투 중 **12~20회** 스킬 사용 가능 (쿨다운이 실질 제한. SP는 여유로움)
- **설계 의도**: SP는 쿨다운 사이 선택지를 만드는 보조 자원. 핵심 스킬 표현은 "언제 쓰느냐" (타이밍).

#### Skill Pool (6개 중 3개 선택)

| 스킬 | SP 비용 | 효과 | 쿨다운 | 전략 |
|------|---------|------|--------|------|
| **Shield Burst** | 30 SP | 아군 전체 3초간 무적 | 30초 | 위기 순간 역전. 타이밍이 핵심 |
| **EMP Strike** | 40 SP | 적 전체 5초간 이동/공격 정지 | 45초 | 공세 기회 창출 |
| **Overcharge** | 30 SP | 10초간 와트 충전 3배 | 60초 | 물량 폭발 |
| **Focus Fire** | 25 SP | 10초간 아군 전체가 지정 유닛 집중 공격 | 20초 | 핵심 유닛 제거 |
| **Repair Pulse** | 35 SP | 아군 전체 HP 15% 회복 | 40초 | 지속전 생존력 |
| **Scramble** | 20 SP | 8초간 적 유닛 타겟팅 랜덤화 | 25초 | 적 화력 분산, 집중포화 방지 |

**스킬 덱 구성 예시:**

```
공격적 덱: EMP Strike + Focus Fire + Overcharge
→ EMP로 정지 → Focus Fire로 핵심 제거 → Overcharge로 물량 밀기

방어적 덱: Shield Burst + Repair Pulse + Scramble
→ Shield로 위기 돌파 → Repair로 회복 → Scramble로 화력 분산

밸런스 덱: Shield Burst + EMP Strike + Focus Fire
→ 공방 전환 가능한 범용 구성
```

**SP 운용 예시 (3분 전투):**
```
0:00  시작 SP: 30
0:06  SP 60 → Focus Fire(25) 사용 → 잔여 35
0:20  SP 105→100(최대) → EMP(40) 사용 → 잔여 60
0:40  SP 160→100 → Overcharge(30) 사용 → 잔여 70
1:10  SP 100 → Focus Fire(25) 사용 → 잔여 75
...
→ 3분 동안 약 12~15회 스킬 사용 가능. 매 15~20초마다 판단 필요.
```

#### Skill Interaction Rules (스킬 상호작용)

| 상황 | 규칙 |
|------|------|
| **Shield Burst 중 EMP 맞음** | 무적 = 데미지 면역만. CC(EMP 정지, Scramble 랜덤) 효과는 별도 적용. Shield가 CC를 막지 않음 |
| **EMP 중 Shield Burst 사용** | 가능. 이미 정지된 유닛은 EMP 종료까지 정지 유지. Shield는 추가 데미지만 방어 |
| **Focus Fire 타겟 사망** | 즉시 종료, 기본 타겟팅 복귀. 쿨다운은 이미 시작됨 |
| **Focus Fire 대상 선택** | 자동: 적 중 가장 와트 비용 높은 유닛. (프로토타입 — 추후 수동 지정 추가 가능) |
| **Scramble + Focus Fire** | Scramble이 우선. Scramble 지속 중에는 Focus Fire 무효화 |
| **동일 스킬 중복 사용** | 쿨다운 중에는 사용 불가. 동일 효과 중첩 없음 |

---

## 5. Battle Results (전투 결과)

> v0.2 신규: 빌드별 상세 통계

### 5.1 Results Screen

```
┌──────────────────────────────────────────────┐
│  ★ 승리! (기지 파괴)          전투 시간: 3:24  │
├──────────────────────────────────────────────┤
│  빌드별 성적:                                 │
│                                              │
│  [A] Economy Rush                            │
│  생산: 8기 | 생존: 3기 | 킬: 5 | 데미지: 12,400 │
│  ████████████████░░░░ 62% of total damage    │
│                                              │
│  [B] Tank Buster                             │
│  생산: 3기 | 생존: 1기 | 킬: 2 | 데미지: 5,800  │
│  ████████░░░░░░░░░░░░ 29% of total damage    │
│                                              │
│  [C] Glass Cannon                            │
│  생산: 1기 | 생존: 1기 | 킬: 1 | 데미지: 1,800  │
│  ████░░░░░░░░░░░░░░░░ 9% of total damage     │
│                                              │
├──────────────────────────────────────────────┤
│  스킬 사용: 8회 | SP 효율: 78%                │
│  획득: 150 골드  45 EXP                       │
│                                              │
│  [다시 하기]  [조립실]  [메인]                  │
└──────────────────────────────────────────────┘
```

### 5.2 Statistics Tracked (per build)
- 생산 수 / 생존 수 / 격파 수
- 총 데미지 / 받은 데미지
- 평균 생존 시간
- 가장 많이 교전한 상대 빌드

→ 플레이어가 "어떤 빌드가 활약했고, 어떤 빌드가 부족한지"를 정량적으로 파악
→ 다음 조립실에서의 수정 동기 부여

---

## 6. Progression System (성장 시스템)

> 프로토타입에서는 단순화. 정식에서 확장.

### 6.1 Prototype (최소)

```
전투 승리 → 골드 획득 → 새 파츠 구매 가능
전투 패배 → 골드 소량 획득
```

### 6.2 Full Version (정식 — 추후 설계)

**경험치 & 레벨:**
- 전투 참여 → EXP 획득
- 레벨업 → 새 파츠 카테고리 해금
- 레벨 1~10: 기본 파츠
- 레벨 11~20: 고급 파츠
- 레벨 21~30: 전설 파츠

**골드 경제:**
- 전투 보상, 일일 퀘스트
- 용도: 파츠 구매, 파츠 강화

**파츠 강화 (Nova의 0~4성 계승):**
- 골드 소모 → 파츠 강화 (실패 없음 — Nova의 RNG 도박 문제 해결)
- 강화 시 스탯 +10% per 성급
- 최대 3성 (프로토에선 없음)

**랭크 시스템:**
- 비동기 PvP 승패 → 랭크 포인트 변동
- 시즌제 (3개월) → 시즌 보상

---

## 7. Game Modes (게임 모드)

### 7.1 PvE: Wave Defense (5분 버티기)
> Nova 1492의 전설적 모드를 계승

```
규칙:
- 5분간 적 웨이브 방어
- 기지 HP(2000)가 0이 되면 패배
- 5분 생존 시 승리

웨이브 구조 (5분):
0:00~1:00  Wave 1: 약한 적 소수
1:00~2:00  Wave 2: 중간 적 + 물량 증가
2:00~3:00  Wave 3: 강한 적 등장
3:00~4:00  Wave 4: 엘리트 적 혼합
4:00~5:00  Wave 5: 보스급 + 총공세

난이도: Easy / Normal / Hard / Nightmare
보상: 난이도별 골드 + 파츠 드롭 확률 증가
```

### 7.2 PvP: Async Battle (비동기 대전)
> 동시 접속 불필요. 유저 수 적어도 작동.

```
구조:
1. 내 3빌드 로스터 + 스킬 덱 + 생산 비율 등록
2. 서버가 비슷한 랭크의 상대 매칭
3. AI가 양쪽 조작 → 전투 시뮬레이션
4. 결과 기록 → 다음 접속 시 결과 확인

스킬 AI:
- 등록 시 "스킬 사용 조건"을 설정
  예: "아군 HP 30% 이하 시 Shield Burst"
  예: "적 5기 이상 밀집 시 EMP Strike"
  예: "Focus Fire → 적 HP 가장 높은 유닛"
→ 조립 + 스킬 조건 설정 = 전략의 깊이
```

### 7.3 PvP: Real-time (실시간 대전 — 추후)
- 유저 풀 충분해지면 추가
- 스킬 직접 사용 (비동기와 차별화)
- 랭킹 별도 운영

---

## 8. UI/UX Flow

```
[메인 화면]
├── [출격] → 모드 선택 (PvE / PvP)
├── [조립실] → 3빌드 로스터 구성 + 스킬 덱 편집
├── [상점] → 파츠 구매 / 강화
├── [랭킹] → 시즌 랭킹 확인
└── [설정]

[조립실 화면]
┌────────────────────────────────────────────┐
│  [로스터] Build A | Build B | Build C       │
├────────────────────────────────────────────┤
│  [파츠 목록]          │  [조립 미리보기]      │
│  ┌──────────┐        │  ┌──────────────┐   │
│  │ MP (다리) │        │  │              │   │
│  │ BP (몸통) │        │  │   조립된 로봇  │   │
│  │ AP (무기) │        │  │   비주얼      │   │
│  │ ACP(악세) │        │  │              │   │
│  └──────────┘        │  └──────────────┘   │
│                      │                     │
│  [스탯 표시]          │  [총 무게 / 하중]    │
│  공격: 40             │  195 / 200 ✅       │
│  방어: 10             │                     │
│  HP: 500             │  [와트 비용: 100]    │
│  속도: 5              │  [와트 티어: Tier 2] │
│  사거리: 6            │                     │
│  DPS(방어10 기준): 96 │  [저장]              │
├────────────────────────────────────────────┤
│  [스킬 덱 (3/6)]                            │
│  ✅ Shield Burst | ✅ EMP Strike | ✅ Focus Fire │
│  ☐ Overcharge  | ☐ Repair Pulse | ☐ Scramble  │
├────────────────────────────────────────────┤
│  [생산 비율] A: ██████ 60% | B: ███ 30% | C: █ 10% │
│  [출격]                                     │
└────────────────────────────────────────────┘

[전투 화면]
┌────────────────────────────────────────────┐
│  [내 기지 HP: ████████ 80%]    [타이머 3:24]│
│                                            │
│   ◆◆      →→     ◇◇◇                      │
│   ◆        →→        ◇◇                    │
│   ◆◆◆     →→     ◇                         │
│                                            │
│  [적 기지 HP: ██████ 60%]                   │
│                                            │
├────────────────────────────────────────────┤
│  [와트: 340/500]  [SP: 65/100 (+5/s)]      │
│  [생산비율 A:B:C = 3:1:1]                   │
│  [Shield 30SP] [EMP 40SP] [Focus 25SP]     │
│  [유닛: 12/15]                              │
└────────────────────────────────────────────┘
```

---

## 9. Monetization (수익 모델)

### 9.1 Base Model
- **유료 판매**: $9.99 (Steam)
- 웹 버전은 무료 플레이 가능 (파츠 제한)

### 9.2 Cosmetic Only (P2W 절대 금지)
| 아이템 | 가격 | 설명 |
|--------|------|------|
| 로봇 스킨 | $1~3 | 외형 변경. 스탯 영향 없음 |
| 폭발 이펙트 | $1~2 | 유닛 파괴 시 이펙트 |
| 기지 테마 | $2~5 | 기지 외형 변경 |
| 전투 BGM | $1~2 | 커스텀 배경음악 |

### 9.3 Battle Pass (시즌)
- 무료 트랙: 골드, 기본 보상
- 유료 트랙 ($4.99): 스킨, 이펙트, 칭호
- 시즌 3개월
- **절대 파워 아이템 없음**

---

## 10. Prototype Scope (프로토타입 범위)

### 포함
| 항목 | 상세 |
|------|------|
| 파츠 | 각 카테고리 5종 = 총 20개 파츠 |
| 조립 화면 | 3빌드 로스터 구성, 스탯 표시, 하중 체크, DPS 미리보기 |
| 전투 | 오토배틀 + 스킬 6개 중 3개 선택 + SP 재생 |
| 와트 경제 | 4티어 와트 비용 + 자동 충전 → 유닛 자동 생산 |
| 로스터 | 3빌드 구성 + 생산 비율 조절 |
| 전장 | 단일 레인 30타일, 기지 HP 2000 |
| AI 상대 | 미리 정의된 적 빌드 3~5개 |
| 결과 화면 | 빌드별 상세 통계 + 골드 보상 |
| 상점 | 골드로 파츠 구매 |
| 타겟팅 | 무기별 차별화 타겟팅 |
| 공중/지상 | Hover 30% 회피 |

### 미포함 (추후)
| 항목 | 이유 |
|------|------|
| 멀티플레이 | 싱글에서 재미 검증 먼저 |
| 레벨/랭크 | 코어 루프 검증 후 |
| 파츠 강화 | 기본 조립 재미 확인 후 |
| 사운드/BGM | 프로토에서 불필요 |
| 예쁜 그래픽 | 도형+색상으로 충분 |

### 검증 목표
> **"파츠를 바꿔 끼면서 최적 조합을 찾는 것이 재밌는가?"**
>
> 이것이 YES이면 나머지는 확장. NO이면 설계 재검토.

**부차 검증:**
> "3빌드 로스터 + 생산 비율 조절이 전술적 깊이를 주는가?"
> "스킬 20~30초마다 사용이 능동적 참여감을 주는가?"

---

## 11. Technical Architecture (기술 구조)

### Stack
```
Language:    TypeScript
Rendering:   HTML5 Canvas (2D)
UI:          HTML/CSS (조립실, 메뉴)
State:       In-memory (프로토타입)
Build:       Vite
Deploy:      Vercel / Netlify (웹)
             Electron (Steam)
```

### Project Structure
```
/src
  /core
    game.ts           # 게임 메인 루프
    types.ts          # 공통 타입 정의
  /assembly
    parts.ts          # 파츠 데이터 & 조합 로직
    assembly-rules.ts # 하중, 타입매칭, 와트티어 규칙
    roster.ts         # 3빌드 로스터 관리
    inventory.ts      # 보유 파츠 관리
  /combat
    battle.ts         # 전투 루프 & 시뮬레이션
    battlefield.ts    # 30타일 전장 상태 관리
    unit.ts           # 유닛 상태 & 행동 AI
    targeting.ts      # 무기별 타겟팅 로직
    damage.ts         # 승산 데미지 계산 공식
    skills.ts         # 스킬 정의 & 사용 로직
    watt.ts           # 와트 경제 시스템
  /ui
    main-menu.ts      # 메인 화면
    assembly-ui.ts    # 조립실 UI (3빌드 탭)
    battle-ui.ts      # 전투 화면 렌더링
    result-ui.ts      # 결과 화면 (빌드별 통계)
    shop-ui.ts        # 상점 UI
  /data
    parts-data.ts     # 파츠 스탯 테이블
    enemies-data.ts   # AI 적 빌드 정의
    skills-data.ts    # 스킬 데이터
  /utils
    math.ts           # 수학 유틸
    render.ts         # Canvas 렌더링 헬퍼
```

---

## Appendix A: Balance Philosophy (밸런스 철학)

### 핵심 원칙
1. **"다 좋은 유닛"은 없다** — 모든 빌드에 카운터가 존재
2. **승산 공식** — 방어가 높으면 데미지 줄지만 0은 아님. 극단적 상성 아닌 부드러운 유불리
3. **와트가 비싸면 강해야 한다** — 비용 대비 성능 일정
4. **조립이 실력이다** — 조작보다 준비가 중요
5. **3빌드 로스터** — 단일 빌드 메타 방지. 최소 3가지 역할 고려

### 상성 매트릭스 (프로토타입)

> 승산 공식에서는 "완전 무력화"가 없음. 아래는 **상대적 효율** 표시.
> ◎=매우 유리 / ○=유리 / △=보통 / ▽=불리 (DPS/와트 기준)

```
              Vulcan   Cannon   Sniper   Missile   Hammer
고방어 유닛:    ▽       ○       △        △        ◎
저방어 물량:    ◎       △       ○        ◎        △
고HP 탱크:     △       △       △        △        ◎
공중(Hover):   △       ▽       ○        ○        ▽
밀집 물량:     ○       △       △        ◎        △
후방 유닛:     ▽       △       ◎        △        ▽
```

> **해석 주의**: Vulcan은 와트 효율이 4배 높아 "△" 매치업도 물량으로 유리할 수 있음.
> 실제 밸런스는 프로토타입 시뮬레이션에서 검증 필요. Vulcan 스팸 승률 55% 초과 시 연사 10→8 조정.

### 밸런스 검증 기준
- 하나의 빌드가 승률 60% 이상이면 너프 필요
- **Vulcan 스팸 전략** 승률 55% 초과 시 fire_rate 10→8 또는 무게 80→90 조정
- 사용률 5% 이하 파츠는 버프 필요
- "이 파츠는 왜 안 쓰지?"가 없어야 함
- 모든 20개 파츠가 최소 1개 이상의 실전 빌드에 포함되어야 함

---

## Appendix B: Glossary (용어집)

| 용어 | 설명 |
|------|------|
| 와트 (Watt) | 유닛 생산 자원. 시간에 따라 자동 충전 |
| 하중 (Load) | 다리가 지탱할 수 있는 최대 무게 |
| SP (Skill Points) | 전투 중 스킬 사용 자원. 초당 5 재생 |
| 파츠 (Parts) | 로봇을 구성하는 부품 (MP/BP/AP/ACP) |
| 빌드 (Build) | 특정 파츠 조합으로 만든 유닛 구성 |
| 로스터 (Roster) | 전투에 투입할 3개 빌드 구성 |
| 덱 (Deck) | 전투에 가져갈 스킬 3개 구성 (6개 중 선택) |
| 와트 티어 | 유닛 총 무게 기반 생산 비용 4단계 |
| DPS | Damage Per Second. 초당 데미지 |
| 승산 공식 | atk × (atk/(atk+def)) × fire_rate. 방어가 높아도 데미지 0이 되지 않는 공식 |

---

## Appendix C: All Valid Build Combinations (조합 유효성)

> 타입매칭 + 하중제한을 적용한 모든 유효 조합 요약

### 타입별 가능 조합

**팔형 (AP01 Vulcan, AP05 Hammer) × 팔형 (BP01 Light Frame, BP02 Standard)**

| 다리 | 몸통 | 무기 | 무게(무악세) | 악세 가능 | 와트(무악세) |
|------|------|------|------------|----------|------------|
| MP01 Scout(160) | BP01(50) | Vulcan(80) | 130 | ACP01(20)✅ ACP02(30)✅ ACP03(15)✅ ACP04(25)✅ ACP05(30)✅ | T1:60 |
| MP01 Scout(160) | BP01(50) | Hammer(100) | 150 | — (잔여 10, 최소 악세 15) | T2:100 |
| MP01 Scout(160) | BP02(100) | Vulcan(80) | 180 ❌ | — (하중 부족) | — |
| MP01 Scout(160) | BP02(100) | Hammer(100) | 200 ❌ | — (하중 부족) | — |
| MP02 Walker(200) | BP01(50) | Vulcan(80) | 130 | 전부 ✅ | T1:60 |
| MP02 Walker(200) | BP01(50) | Hammer(100) | 150 | 전부 ✅ | T2:100 |
| MP02 Walker(200) | BP02(100) | Vulcan(80) | 180 | ACP01(20)✅ ACP03(15)✅ | T2:100 |
| MP02 Walker(200) | BP02(100) | Hammer(100) | 200 | — | T2:100 |
| MP03 Hover(150) | BP01(50) | Vulcan(80) | 130 | ACP01(20)✅ ACP03(15)✅ | T1:60 |
| MP03 Hover(150) | BP01(50) | Hammer(100) | 150 | — | T2:100 |
| MP03 Hover(150) | BP02(100) | Vulcan(80) | 180 ❌ | — (하중 부족) | — |
| MP03 Hover(150) | BP02(100) | Hammer(100) | 200 ❌ | — (하중 부족) | — |
| MP04 Tank(350) | BP01(50) | Vulcan(80) | 130 | 전부 ✅ | T1:60 |
| MP04 Tank(350) | BP01(50) | Hammer(100) | 150 | 전부 ✅ | T2:100 |
| MP04 Tank(350) | BP02(100) | Vulcan(80) | 180 | 전부 ✅ | T2:100 |
| MP04 Tank(350) | BP02(100) | Hammer(100) | 200 | 전부 ✅ | T2:100 |
| MP05 Spider(300) | BP01(50) | Vulcan(80) | 130 | 전부 ✅ | T1:60 |
| MP05 Spider(300) | BP01(50) | Hammer(100) | 150 | 전부 ✅ | T2:100 |
| MP05 Spider(300) | BP02(100) | Vulcan(80) | 180 | 전부 ✅ | T2:100 |
| MP05 Spider(300) | BP02(100) | Hammer(100) | 200 | 전부 ✅ | T2:100 |

**어깨형 (AP02 Cannon, AP04 Missile) × 어깨형 (BP03 Fortress, BP05 Juggernaut)**

| 다리 | 몸통 | 무기 | 무게(무악세) | 악세 가능 | 와트(무악세) |
|------|------|------|------------|----------|------------|
| MP04 Tank(350) | BP03(200) | Cannon(150) | 350 | — | T4:220 |
| MP04 Tank(350) | BP03(200) | Missile(130) | 330 | ACP01(20)✅ ACP03(15)✅ | T4:220 |
| MP04 Tank(350) | BP05(200) | Cannon(150) | 350 | — | T4:220 |
| MP04 Tank(350) | BP05(200) | Missile(130) | 330 | ACP01(20)✅ ACP03(15)✅ | T4:220 |
| MP05 Spider(300) | BP03(200) | Cannon(150) | 350 ❌ | — | — |
| MP05 Spider(300) | BP03(200) | Missile(130) | 330 ❌ | — | — |
| MP05 Spider(300) | BP05(200) | Cannon(150) | 350 ❌ | — | — |
| MP05 Spider(300) | BP05(200) | Missile(130) | 330 ❌ | — | — |

> ⚠️ Spider(하중300)로는 어깨형 조합 전부 불가 (최소 330). **어깨형은 Tank 전용.**
> MP01(160), MP02(200), MP03(150)은 어깨형 최소 무게(330)를 감당 불가 → 어깨형은 Tank 독점.
> **결과: 모든 어깨형 빌드는 항상 Tier 4 (220W), 속도 3. 이것은 의도된 설계 — 중화기는 가장 비싸고 느리지만 가장 튼튼하다.**
> Missile+Miser Core(345W, 하중 350 이내): 220×0.7=**154W** → Cannon(220W) 대비 경제적 운용 가능.

**탑형 (AP03 Sniper) × 탑형 (BP04 Sniper Bay)**

| 다리 | 몸통 | 무기 | 무게(무악세) | 악세 가능 | 와트(무악세) |
|------|------|------|------------|----------|------------|
| MP02 Walker(200) | BP04(150) | Sniper(120) | 270 | — (하중 부족) | — |
| MP04 Tank(350) | BP04(150) | Sniper(120) | 270 | 전부 ✅ | T3:160 |
| MP05 Spider(300) | BP04(150) | Sniper(120) | 270 | ACP01(20)✅ ACP02(30)✅ ACP03(15)✅ ACP04(25)✅ ACP05(30)✅ | T3:160 |

> 탑형은 Spider 또는 Tank. Sniper+Overdrive 빌드는 Spider(300) ≥ 150+120+30=300 ✅

### 파츠별 사용 가능 빌드 수

| 파츠 | 등장 빌드 수 | 상태 |
|------|------------|------|
| MP01 Scout | 3+ | ✅ 경량 팔형 전용 |
| MP02 Walker | 5+ | ✅ 범용 |
| MP03 Hover | 2+ | ✅ 공중 팔형 전용 |
| MP04 Tank | 10+ | ✅ 유일한 어깨형 다리 + 범용 |
| MP05 Spider | 8+ | ✅ 중량 범용 |
| BP01 Light Frame | 팔형 전체 | ✅ 경량 팔형 |
| BP02 Standard | 팔형 전체 | ✅ 밸런스 팔형 |
| BP03 Fortress | 어깨형(Tank) | ✅ 방어 특화 |
| BP04 Sniper Bay | 탑형 2다리 | ✅ 저격 전용 |
| BP05 Juggernaut | 어깨형(Tank) | ✅ HP 특화 |
| AP01 Vulcan | 팔형 전체 | ✅ 연사 장갑관통 |
| AP02 Cannon | 어깨형(Tank) | ✅ 단발 화력 |
| AP03 Sniper | 탑형 2다리 | ✅ 장거리 |
| AP04 Missile | 어깨형(Tank) | ✅ 범위 공격 |
| AP05 Hammer | 팔형 전체 | ✅ 대탱크 |
| ACP01 Power Chip | 대부분 | ✅ 공격 보조 |
| ACP02 Shield Gen | 여유 빌드 | ✅ 방어 보조 |
| ACP03 Miser Core | 대부분 | ✅ 경제 |
| ACP04 HP Module | 여유 빌드 | ✅ 생존 |
| ACP05 Overdrive | 여유 빌드 | ✅ 사거리+연사 시너지 |

> **결론: 20개 파츠 모두 최소 1개 이상의 유효 빌드에 포함. 죽은 파츠 0개.**
